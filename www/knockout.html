<div data-bind="with: bill">
    <h3>Gozintas</h3>
    <p>Total Amount: <input data-bind="value: total.formattedPrice" /></p>
    <p>Tax Amount: <input data-bind="value: tax.formattedPrice" /></p>
    Group mode<input type="radio" name="gozMode" value="group" data-bind="checked: gozMode, disable: total() == 0" />
    Split individual mode <input type="radio" name="gozMode" value="split-individual" data-bind="checked: gozMode, disable: total()== 0" />
    Determine tip mode <input type="radio" name="gozMode" value="determine-tip" data-bind="checked: gozMode, disable: total()== 0" />
</div>

<p>----------------------------</p>
<p>----------------------------</p>
<p>----------------------------</p>

<div data-bind="with: bill, visible: bill.gozMode() =='group'">
    <h3>Group Mode</h3>
    <table>
        <thead>
            <tr>
                <th>Nickname</th>
                <th>People In Party</th>
                <th>Drinks/Deserts/Etc</th>
                <th>Wine</th>
                <th>Carryout</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: groups">
            <tr>
                <td><input data-bind="value: nickname"></input></td>
                <td><input data-bind="value: peopleInParty"></input></td>
                <td><input data-bind="value: general.formattedPrice"></input></td>
                <td><input data-bind="value: wine.formattedPrice"></input></td>   
                <td><input data-bind="value: carryout.formattedPrice"></input></td>    
                <td><a href="#" data-bind="click: $parent.removeGroup">Remove</a></td>            
            </tr>
        </tbody>
    </table>
    <button data-bind="click: addGroup">Add Group</button>
    <div data-bind="visible: total() > 0">
        <strong>Tip Rates</strong>
        <p data-bind="visible: hasGeneral">General Tip: <input data-bind="value: tip.general.formattedTip" /></p>  
        <p data-bind="visible: hasWine">Wine Tip: <input data-bind="value: tip.wine.formattedTip" /></p>  
        <p data-bind="visible: hasCarryout">Carryout Tip: <input data-bind="value: tip.carryout.formattedTip" /></p>
        <p data-bind="visible: hasTax">Tax Tip: <input data-bind="value: tip.tax.formattedTip" /></p>  
    </div>
</div>

<div data-bind="with: bill, visible: bill.gozMode() =='determine-tip'">
    <h3>Determine tip</h3>
    <p>Total Amount: <div data-bind="text: total "></div></p>
    <p data-bind="visible: hasGeneral">General Tip: <input data-bind="value: tip.general.formattedTip" /></p>  
    <p data-bind="visible: hasTax">Tax Tip: <input data-bind="value: tip.tax.formattedTip" /></p>
    <p>Food Total (<span data-bind="text: tip.general.formattedTip"></span>) <span data-bind="text: total.formattedPrice"></span></p>
    <p>Tax Total (<span data-bind="text: tip.tax.formattedTip"></span>) <span data-bind="text: tax.formattedPrice"></span></p>
    <p>Calculated total: <span data-bind="text: calculatedTotal()"></span></p>
</div>

<div data-bind="with: bill, visible: bill.gozMode() =='split-individual'">
    <h3>Split Individual</h3>
    <table>
        <thead>
            <tr>
                <th>People In Party</th>
                <th>Food Total</th>
                <th>Drinks/Deserts/Etc</th>
                <th>Wine</th>
                <th>Carryout</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input data-bind="value: groups()[0].peopleInParty"></input></td>
                <td><input data-bind="value: '$' + foodTotal()" disabled="disabled"></input></td>
                <td><input data-bind="value: groups()[0].general.formattedPrice"></input></td>
                <td><input data-bind="value: groups()[0].wine.formattedPrice"></input></td>   
                <td><input data-bind="value: groups()[0].carryout.formattedPrice"></input></td>    
            </tr>
        </tbody>
    </table>

    <div data-bind="visible: total() > 0">
        <strong>Tip Rates</strong>
        <p data-bind="visible: hasGeneral">General Tip: <input data-bind="value: tip.general.formattedTip" /></p>  
        <p data-bind="visible: hasWine">Wine Tip: <input data-bind="value: tip.wine.formattedTip" /></p>  
        <p data-bind="visible: hasCarryout">Carryout Tip: <input data-bind="value: tip.carryout.formattedTip" /></p>
        <p data-bind="visible: hasTax">Tax Tip: <input data-bind="value: tip.tax.formattedTip" /></p>  
    </div>

    <div>
        <h3> Totals </h3>
        <p>Food Total (<span data-bind="text: tip.general.formattedTip"></span> Tip = <span data-bind="text: tip.general() * foodTotal()"></span>): <span data-bind="text: '$'+foodTotal() / groups().length"></span></p>
        <p>General Total (<span data-bind="text: tip.general.formattedTip"></span> Tip = <span data-bind="text: tip.general() * groups()[0].general()"></span>): <span data-bind="text: groups()[0].general.formattedPrice"></span></p>
        <p data-bind="visible: hasWine" >Wine Total (<span data-bind="text: tip.wine.formattedTip"></span> Tip): <span data-bind="text: groups()[0].wine.formattedPrice"></span></p>
        <p data-bind="visible: hasCarryout">Carryout Total (<span data-bind="text: tip.carryout.formattedTip"></span> Tip): <span data-bind="text: groups()[0].carryout.formattedPrice"></span></p>
        <p>Tax Total (<span data-bind="text: tip.tax.formattedTip"></span> Tip = <span data-bind="text: tip.tax() * tax()"></span>): <span data-bind="text: '$' + (tax()/groups().length).toFixed(2)"></span></p>
        <p>Tip Individual: <span data-bind="text: '$' + splitIndividualTipIndividual().toFixed(2)"></span></p>
        <p>Tip Total: <span data-bind="text: '$' + splitIndividualTipTotal().toFixed(2)"></span></p>
        <p>Total Individual: <span data-bind="text: tax.formattedPrice"></span></p>
        <p>Total For Party: <span data-bind="text: tax.formattedPrice"></span></p>
        <p>Calculated total: <span data-bind="text: calculatedTotal()"></span></p>

    </div>
</div>

<p>----------------------------</p>
<p>----------------------------</p>
<p>----------------------------</p>
<strong> DATA OUTPUT BELOW</strong>
<pre data-bind="text: JSON.stringify(ko.toJS($data), null, 3)"></pre>

<link rel="stylesheet" type="text/css" href="css/index.css">
<script type='text/javascript' src='knockout-2.2.0.debug.js'></script>
<script type='text/javascript' src='knockout.validation.js'></script>
<script type='text/javascript' src='application.js'></script>
